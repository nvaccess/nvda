body {
  margin: 0 auto;
  max-width: 50em;
  font-family: "Helvetica", "Arial", sans-serif;
  line-height: 1.5;
  padding: 4em 1em;
  color: #333;
}

:lang(ar) body *, :lang(fa) body * {
  font-family: "Simplified Arabic", "Traditional Arabic", "Arial", sans-serif !important;
}

h1 {
  color:white;
  background-color: #472F5F; /* NVDA purple */
}

h2 {
  margin-top: 1em;
  padding-top: 1em;
}

h2, h3, h4, a {
  color: #472F5F; /* NVDA purple */
}

strong {
  color: #000;
}

/* tables */
table, td, th {
  border:1px solid black;
}
table{
  border-collapse: collapse;
}
td, th {
  padding: 0.25em;
}
th {
  color: #472F5F; /* NVDA purple */
}

/* code / pre */
code,
pre {
  background: #f6f8fa;
  border-bottom: 1px solid #d8dee9;
  color: #33104e;
}

code {
  padding: 2px 4px;
  vertical-align: text-bottom;
}
pre {
  padding: 1em;
  border-left: 2px solid #69c;
}

/* 
Definition styling.
https://txt2tags.org/markup.html
In t2t, definition lists are defined as follows:

: Definition list
  A list with terms
: Start term with colon
  And its definition follows
:
*/

/* Definition list */
dl {
  display: grid;
  grid-template-columns: auto;
}

/* Term of a definition */
dl > dt {
  grid-column-start: 1;
  font-style: italic;
  font-weight: bold;
  font-size: small;
}

/* Definition of a term */
dl > dd {
  display: inherit;
  grid-column-start: 2;
  margin-inline-start: 1em;
  font-size: small;
  font-style: italic;
}

thead:has(tr > th.hideHeaderRow) {
  display: none;
}

/* Numbering for table of contents.
.toc > ul > li is used as the base for the numbering.
This is because the first and only first level TOC element is the heading for the page, so it should be skipped.
*/
.toc > ul > li {
  list-style-type: none;
  counter-reset: toc-counter;
}

.toc > ul > li li {
  counter-increment: toc-counter 1;
}

.toc > ul > li li:before {
  content: counter(toc-counter) ". ";
}

.toc > ul > li ul {
  list-style-type: none;
  counter-reset: toc-counters;
}

.toc > ul > li ul li:before {
  counter-increment: toc-counters;
  content: counters(toc-counters, ".") ". "; /* generates inherited counters from parents */
}

/* RTL */

/* Note there is a known bug where the numbering is not reversed for RTL languages.

Desired:
lorem ١.١
ipsum ٢.١
dolar ٣.١

Actual:
lorem ١.١
ipsum ١.٢
dolar ١.٣

This is due to counters always appending to the end of the list, and not the start.
Ideally there would be an option to reverse the numbering for RTL languages.

https://stackoverflow.com/a/35391887
*/
:lang(ar) .toc > ul > li ul li:before, :lang(fa) .toc > ul > li ul li:before {
  counter-increment: toc-counters 1;
  content: counters(toc-counters, ".", arabic-indic) " "; /* generates inherited counters from parents */
}


/* Numbering for headings. */

h1 {
  counter-reset: h2counter;
}

h2 {
  counter-reset: h3counter;
  counter-increment: h2counter 1;
}

h3 {
  counter-reset: h4counter;
  counter-increment: h3counter 1;
}

h4 {
  counter-reset: h5counter;
  counter-increment: h4counter 1;
}

h5 {
  counter-reset: h6counter;
  counter-increment: h5counter 1;
}

h6 {
  counter-increment: h6counter 1;
}

h2:before {
  content: counter(h2counter) ". ";
}

h3:before {
  content: counter(h2counter) "." counter(h3counter) ". ";
}

h4:before {
  content: counter(h2counter) "." counter(h3counter) "." counter(h4counter) ". ";
}

h5:before {
  content: counter(h2counter) "." counter(h3counter) "." counter(h4counter) "." counter(h5counter) ". ";
}

h6:before {
  content: counter(h2counter) "." counter(h3counter) "." counter(h4counter) "." counter(h5counter) "." counter(h6counter) ". ";
}

/* RTL */
:lang(ar) h2:before, :lang(fa) h2:before {
  content: counter(h2counter, arabic-indic) ". ";
}

:lang(ar) h3:before, :lang(fa) h3:before {
  content: counter(h3counter, arabic-indic) "." counter(h2counter, arabic-indic) ". ";
}

:lang(ar) h4:before, :lang(fa) h4:before {
  content: counter(h4counter, arabic-indic) "."  counter(h3counter, arabic-indic) "." counter(h2counter, arabic-indic) ". ";
}

:lang(ar) h5:before, :lang(fa) h5:before {
  content: counter(h5counter, arabic-indic) "." counter(h4counter, arabic-indic) "."  counter(h3counter, arabic-indic) "." counter(h2counter, arabic-indic) ". ";
}

:lang(ar) h6:before, :lang(fa) h6:before {
  content: counter(h6counter, arabic-indic) "." counter(h5counter, arabic-indic) "." counter(h4counter, arabic-indic) "."  counter(h3counter, arabic-indic) "." counter(h2counter, arabic-indic) ". ";
}
