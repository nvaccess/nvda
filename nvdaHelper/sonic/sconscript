Import(
	[
		"thirdPartyEnv",
		"sourceDir",
	]
)

env = thirdPartyEnv.Clone()

sonicSrcDir = Dir("#include/sonic")

# Rename the .obj file so that this won't conflict with the static library build in eSpeak
sonicObj = env.Object("sonicDll", srcdir=sonicSrcDir.abspath, source="sonic.c")

# Build sonic.dll with all functions exported
sonicLib = env.SharedLibrary(
	target="sonic",
	source=[
		sonicObj,
		"sonic.def",
	],
)

env.Install(sourceDir, sonicLib)
