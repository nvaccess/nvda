Import([
	'env',
	'nvdaControllerRPCStubs',
])

clientLibName="nvdaControllerClient%s"%('64' if env['TARGET_ARCH']=='x86_64' else '32')

clientLibDefFile=env.File('nvdaControllerClient.def')

clientLib=env.SharedLibrary(
	target=clientLibName,
	source=[
		"client.c",
		nvdaControllerRPCStubs[1],
	],
	LIBS=[
		"rpcrt4",
	],
	LINKFLAGS=env['LINKFLAGS']+['/def:%s'%clientLibDefFile.path],
)
env.Depends(clientLib,clientLibDefFile)

#if 'install' in COMMAND_LINE_TARGETS:
#	installDir=env.Install('#../../extras/controllerClient/',clientLib)
#	env.Default(installDir)

#env.Default(clientLib)

Return('clientLib')
